@model List<VanPhongPhamDKT.Models.CartItem>

@{
    ViewData["Title"] = "Giỏ hàng";
}

<h2>Giỏ hàng của bạn</h2>

@if (Model == null || !Model.Any())
{
    <p>Giỏ hàng trống</p>
}
else
{
    <form asp-action="DatHang" method="post">
        @Html.AntiForgeryToken()
        <!-- Tạm thời dùng mã KH cố định, sau này thay bằng User đăng nhập -->
        <input type="hidden" name="maKh" value="1" />

        <table class="table">
            <thead>
                <tr>
                    <th>Sản phẩm</th>
                    <th>Giá</th>
                    <th>Số lượng</th>
                    <th>Thành tiền</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>@item.TenSp</td>
                        <td>@item.Gia.ToString("N0") đ</td>
                        <td>@item.SoLuong</td>
                        <td>@item.ThanhTien.ToString("N0") đ</td>
                        <td>
                            <a asp-action="Remove" asp-route-maSp="@item.MaSp" class="btn btn-danger btn-sm">Xóa</a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>

        <div class="text-end">
            <h4>
                Tổng: @Model.Sum(x => x.ThanhTien).ToString("N0") đ
            </h4>
            <button type="submit" class="btn btn-primary">Đặt hàng</button>
        </div>
    </form>
}
